{% extends 'base.html.twig' %}
{% block body %}
    <div class="blog-post-body-container center-block" id="single-post-container"
         style="border: 1px solid lavender; padding-top: 50px;">
        <h1 class="text-center">{{ post.title }}<br>

            <div class="rating-container rating-gly-star" data-content="">
                <div class="rating-stars" style="width: {{ rating * 20 }}%" data-content=""></div>
            </div>

        </h1>
        <div class="show-post-posted-at text-primary">
            <i class="glyphicon glyphicon-time"></i> {{ post.createdAt|date('d M Y') }}
        </div>
        <img src="{{ post.webPath | imagine_filter('default_thumb') }}" alt="image" class="center-block img-rounded">


        <div class="center-block show-post-container">
            <div>
                {{ post.text|nl2br }}
                {% if post.tags is not empty %}
                    <div class="post-tags">
                        {% for tag in post.tags %}
                            <a href="{{ path('show_tag', {'slug': tag.slug}) }}">#{{ tag.name }}</a>

                        {% endfor %}
                    </div>

                {% endif %}
            </div>

            <div class="show-post-author-container">

                {% if post.author.smallAvatar is not null %}
                    <img src="{{ post.author.smallAvatar }}">
                {% endif %}
                Author:
                <a href="{{ path('show_author_posts', {'slug': post.author.slug}) }}">
                    <span class="author-name">{{ post.author.name }}
                    </span>
                </a>
            </div>
            <div class="comment-form">
                <h2>
                    Add comment:
                </h2>
                <div>
                    {{ render(controller('AppBundle:Comment:new', {'slug': post.slug})) }}
                </div>
            </div>
            {% if comments is not empty %}
                {% for comment in comments %}
                    <div class="post-single-comment">
                        <h4 class="text-primary"><i class="glyphicon glyphicon-comment"></i> {{ comment.commentAuthor }}:</h4>
                        <div class="rating-container rating-gly-star" data-content="">
                            <div class="rating-stars" style="width: {{ comment.rating * 20 }}%" data-content=""></div>
                        </div>
                        <p><i class="glyphicon glyphicon-time"></i> {{ comment.createdAt|date('d M Y') }} at {{ comment.createdAt|date('H:m:s') }}</p>
                        <p>
                            {{ comment.text|nl2br  }}
                        </p>
                    </div>

                {% endfor %}
            {% endif %}
        </div>
    </div>
{% endblock %}