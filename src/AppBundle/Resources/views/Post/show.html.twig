{% extends 'base.html.twig' %}
{% block body %}
    <div class="container-fluid col-md-12" style="background-color: whitesmoke; padding: 10px; padding-top: 70px">
        <div class="row">
            <div class="col-md-6 col-md-offset-3" style="background-color: white">

                <h1 class="h1 text-left img-rounded post-title">
                    <span style="color: whitesmoke">
                        {{ post.title }}
                    </span>

                    <div class="pull-right rating-container rating-gly-star" data-content="">
                        <div class="rating-stars" style="width: {{ postRating(post) * 20 }}%" data-content=""></div>
                    </div>

                </h1>
                <i class="glyphicon glyphicon-time"> {{ post.createdAt|date('d M Y') }}</i>
                <img src="{{ post.webPath | imagine_filter('default_thumb') }}" alt="image" class="img-rounded">
                <br><br>

            </div>
        </div>
        <div class="row">
            <div class="col-md-6 col-md-offset-3" style="background-color: white;">
                {{ post.text|raw|nl2br }}
                {% if post.tags is not empty %}
                    <div class="post-tags">
                        {% for tag in post.tags %}
                            <a href="{{ path('show_tag', {'slug': tag.slug}) }}">#{{ tag.name }}</a>

                        {% endfor %}
                    </div>

                {% endif %}
            </div>
        </div>
        <div class="row">
            <div class="col-md-6 col-md-offset-3" style="background-color: white; padding: 10px">
                {#
                {% if post.author.smallAvatar is not null %}
                    <img src="{{ post.author.smallAvatar }}">
                {% endif %}
                Author:
                <a href="{{ path('show_author_posts', {'slug': post.author.slug}) }}">
                    <span class="author-name">{{ post.author.name }}
                    </span>
                </a>
                #}

            </div>
        </div>
        <div class="row">
            {% if is_granted('ROLE_USER') %}
                <div class="comment-form col-md-6 col-md-offset-3">
                    <h2 style="color: #7A43B6">
                        Add comment:
                    </h2>
                    <div>
                        {{ render(controller('AppBundle:Comment:new', {'slug': post.slug})) }}
                    </div>
                </div>
            {% endif %}


        </div>
        <div class="row">
            <div class="col-md-6 col-md-offset-3" style="background-color: white; padding: 10px">
                {% if comments is not empty %}
                    {% for comment in comments %}
                        <div class="post-single-comment">
                            {% if comment.user is not null %}
                                <h4 class="text-primary"><i class="glyphicon glyphicon-comment"></i> {{ comment.user.username }}:</h4>
                            {% endif %}


                            <div class="rating-container rating-gly-star" data-content="">
                                <div class="rating-stars" style="width: {{ comment.rating * 20 }}%" data-content=""></div>
                            </div>
                            <p><i class="glyphicon glyphicon-time"></i> {{ comment.createdAt|date('d M Y') }} at {{ comment.createdAt|date('H:m:s') }}</p>
                            <p>
                                {{ comment.text|nl2br  }}
                            </p>
                        </div>

                    {% endfor %}
                {% endif %}
            </div>
        </div>
    </div>

{% endblock %}