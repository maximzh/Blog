{% extends '::admin_base.html.twig' %}
{% block body %}
{{ parent() }}
    <table class="table table-striped table-hover">
        <thead class="bg-info">
        <tr>
            <th>Comment id</th>
            <th>Post image</th>
            <th>Post title</th>
            <th>Author</th>
            <th>Comment</th>
            <th>Created at</th>
            <th>Edit comment</th>
            <th>Delete comment</th>
        </tr>
        </thead>
        {% for comment in comments %}
            <tr>
                <td class="bg-info">{{ comment.id }}</td>
                <td class="bg-info" width="100">
                    {% if comment.post.webPath is not null %}
                        <img src="{{ comment.post.webPath | imagine_filter('small_thumb') }}" alt="image">
                    {% endif %}
                </td>
                <td>{{ comment.post.title }}</td>
                <td>{{ comment.commentAuthor }}</td>
                <td width="400">{{ comment.text|length > 200 ? comment.text|slice(0, 200) ~ '...' :comment.text }}</td>
                <td>{{ comment.createdAt|date('d M Y') }} at {{ comment.createdAt|date('H:m:s') }}</td>
                <td><a href="{{ path('edit_comment', {'id': comment.id}) }}"><i class="glyphicon glyphicon-pencil"></i></a> </td>
                <td>
                    {{ form_start(deleteForms[comment.id], {attr : {onsubmit: 'return confirm("Do you really want to delete?");' }}) }}
                    {{ form_widget(deleteForms[comment.id].submit) }}
                    {{ form_end(deleteForms[comment.id]) }}
                </td>
            </tr>
        {% endfor %}
    </table>
    {{ knp_pagination_render(comments) }}

{% endblock body %}