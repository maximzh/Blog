{% extends '::admin_base.html.twig' %}

{% block body %}
{{ parent() }}
    {#
    <h1>
        <a href="{{ path('new_tag') }}">Create new tag</a>
    </h1>

    <table class="table table-striped table-hover">
        <thead class="bg-info">
        <tr>
            <th>Tag id</th>
            <th>Tag name</th>
            <th>Edit tag</th>
            <th>Delete tag</th>
        </tr>
        </thead>
        {% for tag in tags %}
            <tr>
                <td class="bg-info" width="100">{{ tag.id }}</td>
                <td>{{ tag.name }}</td>
                <td><a href="{{ path('edit_tag', {'id': tag.id}) }}"><i class="glyphicon glyphicon-pencil"></i></a> </td>
                <td>
                    {{ form_start(deleteForms[tag.id], {attr : {onsubmit: 'return confirm("Do you really want to delete?");' }}) }}
                    {{ form_widget(deleteForms[tag.id].submit) }}
                    {{ form_end(deleteForms[tag.id]) }}
                </td>
            </tr>

        {% endfor %}
    </table>
    {{ knp_pagination_render(tags) }}
    #}
    <h1>
        <a href="{{ path('new_tag') }}" style="position: fixed; left: 5%; top: 15%"><i class="glyphicon glyphicon-plus-sign"></i></a>
        <a href="{{ path('new_tag') }}">Create new tag</a>
    </h1>
    <div class="admin-tags">
        {% include 'AppBundle:Admin/Tag:tagList.html.twig' %}
    </div>

{% endblock body %}

{% block javascripts %}
    {{ parent() }}

    <script type="text/javascript">
        function loadRows() {
            var url = $('.pagination span a').attr('href');
            $.get(url, function (data) {
                var content = $(data),
                        articlesList = content.closest('.blog-article'),
                        nextLink = content.find('.next-page');
                $('.admin-tags').append(articlesList);
                if (nextLink.length) {
                    $('.pagination').html(nextLink);
                } else {
                    $('.pagination').remove();
                }
            });
        }
        $(window).scroll(function () {
            if ($(window).scrollTop() == $(document).height() - $(window).height() && $('.pagination span a').length) {
                loadRows();
            }
        });
    </script>

{% endblock %}

